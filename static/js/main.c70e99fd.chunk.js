(this["webpackJsonpreddit-app"]=this["webpackJsonpreddit-app"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var i=a(1),r=a.n(i),c=a(8),n=a.n(c),o=(a(14),a(4)),s=a(2),d=(a(15),a(0)),l=function(e){var t=e.imageSource,a=e.title,i=e.isVideo,r=e.media,c=e.preview,n=e.addToFavorite,o=e.isFavorite,s=e.deleteFromFavorite;return Object(d.jsxs)("div",{className:"card-block",children:[Object(d.jsxs)("div",{className:"header-block",children:[Object(d.jsx)("div",{className:"posted-info"}),Object(d.jsx)("h3",{className:"title",children:a})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"img-block",children:i?Object(d.jsx)("video",{poster:c,controls:!0,className:"video-player",children:Object(d.jsx)("source",{src:r.reddit_video.fallback_url})}):Object(d.jsx)("img",{src:"".concat(t),alt:"post image",height:"600px",width:"500px"})}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"favorite-block",children:o?Object(d.jsx)("button",{className:"favorite-button",onClick:function(){console.log("deleted from favorite"),s()},children:Object(d.jsx)("i",{className:"bi bi-trash"})}):Object(d.jsx)("button",{className:"favorite-button",onClick:function(){console.log("added to favorite"),n()},children:Object(d.jsx)("i",{className:"bi bi-heart-fill"})})})]})},u=function(e){var t=e.posts,a=e.isLoaded,i=e.addToFavorite;return Object(d.jsx)("div",{children:a?null===t||void 0===t?void 0:t.map((function(e,t){var a;return Object(d.jsx)(l,{imageSource:e.data.url,title:e.data.title,isVideo:e.data.is_video,media:e.data.media,preview:null===(a=e.data.preview)||void 0===a?void 0:a.images[0].source.url,addToFavorite:function(){return i(t)}},e.data.id)})):Object(d.jsx)("div",{children:"...Loaded"})})},j=(a(17),function(e){var t=e.posts,a=e.deleteFromFavorite,i=e.isLoaded;return Object(d.jsx)(d.Fragment,{children:i?Object(d.jsxs)("div",{className:"favorited-block",children:[Object(d.jsxs)("h4",{children:["\u0412 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u0441\u0435\u0439\u0447\u0430\u0441 ",t.length]}),null===t||void 0===t?void 0:t.map((function(e,t){var i;return Object(d.jsx)(l,{imageSource:e.data.url,title:e.data.title,isVideo:e.data.is_video,media:e.data.media,preview:null===(i=e.data.preview)||void 0===i?void 0:i.images[0].source.url,deleteFromFavorite:function(){return a(t)},isFavorite:!0},e.data.id)}))]}):null})});var v=a(7),f=a.n(v),b=a(9),h=function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,i,r,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",a="",a=t?"https://www.reddit.com/r/cats/hot.json?after=".concat(t,"&raw_json=1"):"https://www.reddit.com/r/cats/hot.json?raw_json=1",e.next=5,fetch(a);case 5:return i=e.sent,e.next=8,i.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=a.p+"static/media/cats.22d978d6.png",p=(a(19),function(){var e=r.a.useState([]),t=Object(s.a)(e,2),a=t[0],c=t[1],n=r.a.useState(""),l=Object(s.a)(n,2),v=l[0],f=l[1],b=r.a.useState(!1),p=Object(s.a)(b,2),O=p[0],x=p[1],g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[]";console.log(e,t);var a=Object(i.useState)((function(){return console.log("Is return ls item",e),JSON.parse(localStorage.getItem(e)||t)})),r=Object(s.a)(a,2),c=r[0],n=r[1];return Object(i.useEffect)((function(){console.log("Is set ls item",e,c),localStorage.setItem(e,JSON.stringify(c))}),[c,e]),[c,n]}("favorite"),w=Object(s.a)(g,2),N=w[0],F=w[1];r.a.useEffect((function(){h().then((function(e){var t=e.data.children.filter((function(e){return!(!e.data.url_overridden_by_dest||e.data.url.includes("gallery"))}));console.log("after filter",t),c(t),f(e.data.after),x(!0)})).catch((function(e){return console.log(e)}))}),[]);var S=function(){var e=document.querySelector(".App").offsetHeight,t=window.pageYOffset,i=window.innerHeight;Math.ceil(t+i)>=e-600&&(console.log("\u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043d\u043e\u0432\u044b\u0435 \u043f\u043e\u0441\u0442\u044b"),h(v).then((function(e){console.log(e.data.children);var t=e.data.children.filter((function(e){return!(!e.data.url_overridden_by_dest||e.data.url.includes("gallery"))})),i=[].concat(Object(o.a)(a),Object(o.a)(t));c(i),f(e.data.after)})).catch((function(e){return console.log(e)})))};return r.a.useEffect((function(){var e,t,a=(e=S,t=500,function(a){var i=this.lastCall;this.lastCall=Date.now(),i&&this.lastCall-i<=t&&clearTimeout(this.lastCallTimer),this.lastCallTimer=setTimeout((function(){return e(a)}),t)});return window.addEventListener("scroll",a),function(){return window.removeEventListener("scroll",a)}})),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("header",{className:"App-header",children:Object(d.jsxs)("div",{className:"header-content",children:[Object(d.jsx)("img",{src:m,className:"App-logo",alt:"logo"}),Object(d.jsxs)("div",{className:"header-description",children:[Object(d.jsx)("h4",{className:"header-text",children:"Cats"}),Object(d.jsx)("div",{className:"header-subbredit",children:"r/cats"})]})]})}),Object(d.jsxs)("div",{className:"content-block",children:[Object(d.jsx)(u,{posts:a,isLoaded:O,addToFavorite:function(e){console.log(e);var t=Object(o.a)(N);-1===(null===N||void 0===N?void 0:N.findIndex((function(t){return t.data.id===a[e].data.id})))&&(t.push(a[e]),F(t))}}),Object(d.jsx)(j,{posts:N,deleteFromFavorite:function(e){var t=Object(o.a)(N);t.splice(e,1),F(t)},isLoaded:O})]})]})});n.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(p,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.c70e99fd.chunk.js.map